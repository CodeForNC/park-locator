!function(a){"use strict";a.module("appServices",[])}(window.angular),function(a){"use strict";a.module("appControllers",[])}(window.angular),function(a){"use strict";a.module("appFilters",[])}(window.angular),function(a){"use strict";a.module("appDirectives",[])}(window.angular),angular.module("appServices").factory("deviceService",["$window","$q",function(a,b){function c(){return h.promise}function d(){return!!window.MSInputMethodContext&&!!document.documentMode}function e(){return 768>g}function f(a){var b=angular.element(document.getElementById("main-scrollable")),c=angular.element(document.getElementById(a));b.scrollToElementAnimated(c)}var g=a.innerWidth,h=b.defer();return{isMobile:e,isIE:d,activeToast:h,toastIsClosed:c,scrollTo:f}}]),function(a,b){"use strict";a.module("appServices").factory("mapService",["$mdToast","Esri","deviceService",function(a,c,d){function e(b,c){var e=a.simple().textContent(b).action("ok").highlightAction(!1).hideDelay(c||3e3).position("bottom right");d.toastIsClosed().then(function(){a.show(e)})}function f(a,b){return 36.413561>a&&a>35.437814&&-77.93689>b&&b>-78.984583}function g(a){i(a.coords.latitude,a.coords.longitude),b("send","event","Location","geoLocated",a.coords.latitude+","+a.coords.longitude)}function h(a){e("Sorry, could not find you. Please try again."),console.warn("Error: ",a)}function i(a,b){return f(a,b)?(l.userMarker.setGeometry(new l.Point([b,a])),void k(a,b)):e("Oops! It seems this location is not in Raleigh.")}function j(){e("Attempting to find you.",1500),navigator.geolocation?navigator.geolocation.getCurrentPosition(g,h,m):(e("Oops! Your browser does not support Geolocation."),console.warn("Geolocation not supported. Defaulting to backup location."))}function k(a,b){l.map.centerAndZoom(new l.Point({y:a,x:b,spatialReference:{wkid:4326}}),15)}var l,m;return m={enableHighAccuracy:!0,timeout:6e4,maximumAge:3e4},c.modulesReady().then(function(a){l=a,j()}),{updateUserCoords:i,geoLocate:j,centerAndZoom:k}}])}(angular||window.angular,ga),function(a){"use strict";a.module("appServices").service("Esri",["$q",function(b){var c=this,d=b.defer();c.modulesReady=function(){return d.promise},a.element(document).ready(function(){require(["esri/map","esri/graphic","esri/layers/VectorTileLayer","esri/layers/ArcGISImageServiceLayer","esri/layers/GraphicsLayer","esri/layers/FeatureLayer","esri/dijit/Search","esri/renderers/SimpleRenderer","esri/renderers/UniqueValueRenderer","esri/symbols/PictureMarkerSymbol","esri/geometry/Point","esri/tasks/query","esri/tasks/QueryTask","dijit/TooltipDialog","dijit/popup","dojo/domReady!"],function(a,b,e,f,g,h,i,j,k,l,m,n,o,p,q){c.map=new a("map-canvas",{center:[-78.646,35.785],zoom:13,maxZoom:18,minZoom:10,logo:!1}),c.parks=new h("https://maps.raleighnc.gov/arcgis/rest/services/Parks/ParkLocator/MapServer/0",{mode:h.MODE_SNAPSHOT,outFields:["*"],id:"parks"});var r=new j({type:"simple",symbol:{type:"esriPMS",url:"img/icons/park-marker.svg",height:36,width:36}});c.parks.setRenderer(r),c.basemapLayer=new e("https://ral.maps.arcgis.com/sharing/rest/content/items/49d007c1e87249ef9581f5662989fb9a/resources/styles/root.json"),c.aerialLabels=new e("https://ral.maps.arcgis.com/sharing/rest/content/items/fb05b96c9aaa4d90bbb9bc7702330916/resources/styles/root.json",{visible:!1}),c.aerialLayer=new f("https://maps.raleighnc.gov/arcgis/rest/services/Orthos10/Orthos2015/ImageServer",{visible:!1}),c.aerialLayer2013=new f("https://maps.raleighnc.gov/arcgis/rest/services/Orthos10/Orthos2013/ImageServer",{visible:!1}),c.greenways=new h("https://maps.raleighnc.gov/arcgis/rest/services/Parks/Greenway/MapServer/0",{id:"greenways"}),c.greenways2=new h("https://maps.raleighnc.gov/arcgis/rest/services/Parks/Greenway/MapServer/1",{id:"greenway-connectors"});var s=new j({type:"simple",symbol:{type:"esriSLS",color:[150,188,152],style:"esriSLSSolid",width:3}});c.greenways.setRenderer(s),c.greenways2.setRenderer(s),c.amenities1=new h("https://maps.raleighnc.gov/arcgis/rest/services/Parks/ParkLocator/MapServer/2",{mode:h.MODE_SNAPSHOT,outFields:["*"],id:"amenities-outdoors"}),c.amenities2=new h("https://maps.raleighnc.gov/arcgis/rest/services/Parks/ParkLocator/MapServer/3",{mode:h.MODE_SNAPSHOT,outFields:["*"],id:"amenities-indoors"}),c.tracker=new g({id:"location-tracking",visible:!0}),c.map.addLayer(c.basemapLayer),c.map.addLayers([c.aerialLayer2013,c.aerialLayer,c.aerialLabels]),c.map.addLayers([c.greenways,c.greenways2,c.parks,c.tracker]),c.userMarker=new b({geometry:{x:-78.646,y:35.785,spatialReference:{wkid:4326}},attributes:{title:"User Marker"},symbol:{type:"esriPMS",url:"img/icons/user-marker.svg",height:36,width:36}}),c.map.on("load",function(){c.map.graphics.add(c.userMarker)}),c.trackerGraphic=new b({attributes:{title:"My Location"},symbol:{type:"esriPMS",url:"img/icons/my-location.svg",height:36,width:36}}),c.tracker.add(c.trackerGraphic),c.VectorTileLayer=e,c.ArcGISImageServiceLayer=f,c.SimpleRenderer=j,c.UniqueValueRenderer=k,c.Point=m,c.Query=n,c.queryInstance=new n,c.QueryTask=o,c.aerialLayer2015Query=new o("https://maps.raleighnc.gov/arcgis/rest/services/Orthos10/Orthos2015/ImageServer"),c.TooltipDialog=p,c.dijitPopup=q,d.resolve(c)})})}])}(window.angular),function(a){"use strict";a.module("appServices").service("googleMaps",["$q","$timeout",function(b,c){function d(){return a.isDefined(window.google)&&a.isDefined(window.google.maps)}function e(a){var b=a||40;d()?g.resolve(google.maps||window.google.maps):b>1?c(e,500,!1,--b):(console.error("Error: Google Maps library timed out. Try refreshing the page."),g.reject(f))}var f=this,g=b.defer();e(),f.isReady=function(){return g.promise},f.manualRetry=function(){d()&&g.resolve(google.maps||window.google.maps)}}])}(angular||window.angular),function(a){"use strict";a.module("appServices").factory("parkService",["$http","$q","$state","$timeout","Esri","$mdToast","$window",function(b,c,d,e,f,g,h){function i(a){q.currentPark=a,d.go("home.park",{name:a.urlFormat})}function j(a){return console.error("Failed to get data from parks server",a),c.reject(a)}function k(a){var b=a.attributes,c={id:b.OBJECTID,name:b.NAME,searchable:b.NAME.toLowerCase(),urlFormat:b.NAME.replace(/\W+/g,"").toLowerCase(),address:b.ADDRESS,url:b.URL,phone:b.PHONE,alias1:b.ALIAS1,alias2:b.ALIAS2,scale:b.SCALE,artscenter:"Yes"===b.ARTSCENTER,ballfields:"Yes"===b.BALLFIELDS,boatrentals:"Yes"===b.BOATRENTALS,bocce:"Yes"===b.BOCCE,bmxtrack:"Yes"===b.BMXTRACK,canoe:"Yes"===b.CANOE,canoelaunch:"Yes"===b.CANOE,carousel:"Yes"===b.CAROUSEL,discgolf:"Yes"===b.DISCGOLF,dogpark:"Yes"===b.DOGPARK,envctr:"Yes"===b.ENVCTR,fishing:"Yes"===b.FISHING,greenwayaccess:"Yes"===b.GREENWAYACCESS,gym:"Yes"===b.GYM,horseshoe:"Yes"===b.HORSESHOE,inlineskating:"Yes"===b.INLINESKATING,boatride:"Yes"===b.BOATRIDE,library:"Yes"===b.LIBRARY,amusementtrain:"Yes"===b.AMUSEMENTTRAIN,multipurposefield:"Yes"===b.MULTIPURPOSEFIELD,outdoorbasketball:"Yes"===b.OUTDOORBASKETBALL,picnicshelter:"Yes"===b.PICNICSHELTER,playground:"Yes"===b.PLAYGROUND,pool:"Yes"===b.POOL,communitycenter:"Yes"===b.COMMUNITYCENTER,neighborhoodcenter:"Yes"===b.NEIGHBORHOODCENTER,sandvolleyball:"Yes"===b.SANDVOLLEYBALL,skatepark:"Yes"===b.SKATEPARK,tenniscenter:"Yes"===b.TENNISCENTER,tenniscourts:"Yes"===b.TENNISCOURTS,theater:"Yes"===b.THEATER,track:"Yes"===b.TRACK,walkingtrails:"Yes"===b.WALKINGTRAILS,uniquesp:"Yes"===b.UNIQUESP,handball:"Yes"===b.HANDBALL,active_adult:"Yes"===b.ACTIVE_ADULT,teen:"Yes"===b.TEEN,museum:"Yes"===b.MUSEUM,icon:"/img/icons/park-marker.svg",latitude:a.geometry.y,longitude:a.geometry.x,markerClick:i};this[c.urlFormat]||(this[c.urlFormat]=c),this.markers.push(c)}function l(b){return 200===b.status?(q.markers.length>0&&q.markers.splice(0,q.markers.length),a.forEach(b.data.features,k,q),q.markers):j()}function m(b){var c="";0===b.length&&(c+="1 = 1"),a.forEach(b,function(a,d){c+=a.parkAttr+" = 'Yes'",d<=b.length-2&&(c+=" AND ")}),p.parks.setDefinitionExpression(c),p.parks.queryExtent(c,function(a){isNaN(a.extent.xmin)||p.map.setExtent(a.extent.expand(1.3),!0)}),o(c).then(l,j)}function n(a,b,c){var f=c||10;q[b]?(q.currentPark=q[b],a.resolve(q.currentPark)):f>1?e(n,500,!1,a,b,--f):(console.error("Timeout error: No Park with such name: ",b),a.reject(b),g.showSimple("I searched everywhere but didn't find a park with that name!"),d.go("home").then(function(){h.location.reload()}))}function o(a){var c="https://maps.raleighnc.gov/arcgis/rest/services/Parks/ParkLocator/MapServer/0/query?where="+(a?a:"1%3D1")+"&text=&objectIds=&time=&geometry=&geometryType=esriGeometryEnvelope&inSR=&spatialRel=esriSpatialRelIntersects&relationParam=&outFields=*&returnGeometry=true&returnTrueCurves=false&maxAllowableOffset=&geometryPrecision=8&outSR=4326&returnIdsOnly=false&returnCountOnly=false&orderByFields=OBJECTID&groupByFieldsForStatistics=&outStatistics=&returnZ=false&returnM=false&gdbVersion=&returnDistinctValues=false&resultOffset=&resultRecordCount=&f=json";return b({method:"GET",url:c})}var p,q;return f.modulesReady().then(function(a){p=a}),q={markers:[],currentPark:void 0},o().then(l,j),{parks:q,updateParkMarkers:m,resolveCurrentPark:n}}])}(angular||window.angular),angular.module("appServices").factory("amenitiesService",["$http","$q",function(a,b){function c(a){return console.error("Failed to get data from activities server",a),b.reject(a)}function d(a){var b=a.attributes,c=b.SUBCATEGORY;m[c]||console.log(c);var d={id:b.OBJECTID,name:b.LOCATION,park:b.PARK_NAME,subcategory:m[c]||c,latitude:a.geometry.y,longitude:a.geometry.x,icon:m[c]?m[c].icon:"/img/icons/help.svg",options:{visible:!1,labelContent:m[c]?m[c].name:b.LOCATION||"activity",labelClass:"activity-label",labelVisible:!1}};this.push(d)}function e(a){return 200===a.status?(angular.forEach(a.data.features,d,m.markers),m.markers):c()}function f(a){e(a[1]),e(a[2])}function g(a){return 200===a.status?(angular.extend(m.categories,a.data.categories),angular.forEach(a.data.idReferences,function(a,b){angular.forEach(a,function(a){m[a]=m.categories[b]})}),delete m.categories.Library,delete m.categories.Restroom,delete m.categories.Softball,delete m.categories["Youth Baseball"],delete m.categories["Tennis Center"],h(m.categories),m.categories):c()}function h(a){angular.forEach(a,function(a){a.searchable=a.searchable||a.name.toLowerCase(),this.push(a)},m.categoriesArr),m.categoriesArr.sort(function(a,b){return a.searchable>b.searchable?1:-1})}function i(){return a({method:"GET",url:"scripts/amenitycategories.json"})}function j(){return a({method:"GET",url:"scripts/uniqueValueInfos.json"})}function k(){return a({method:"GET",url:"https://maps.raleighnc.gov/arcgis/rest/services/Parks/ParkLocator/MapServer/2/query?where=1%3D1&text=&objectIds=&time=&geometry=&geometryType=esriGeometryEnvelope&inSR=&spatialRel=esriSpatialRelIntersects&relationParam=&outFields=*&returnGeometry=true&returnTrueCurves=false&maxAllowableOffset=&geometryPrecision=8&outSR=4326&returnIdsOnly=false&returnCountOnly=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&returnZ=false&returnM=false&gdbVersion=&returnDistinctValues=false&resultOffset=&resultRecordCount=&f=json"})}function l(){return a({method:"GET",url:"https://maps.raleighnc.gov/arcgis/rest/services/Parks/ParkLocator/MapServer/3/query?where=1%3D1&text=&objectIds=&time=&geometry=&geometryType=esriGeometryEnvelope&inSR=&spatialRel=esriSpatialRelIntersects&relationParam=&outFields=*&returnGeometry=true&returnTrueCurves=false&maxAllowableOffset=&geometryPrecision=8&outSR=4326&returnIdsOnly=false&returnCountOnly=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&returnZ=false&returnM=false&gdbVersion=&returnDistinctValues=false&resultOffset=&resultRecordCount=&f=json"})}var m={categories:{},categoriesArr:[],markers:[],markersConfig:{}},n=i().then(g,c);return b.all([n,k(),l()]).then(f,c),{activities:m,getAmenitiesIcons:j}}]),function(a){"use strict";a.module("appServices").factory("classesService",["$http","$q",function(b,c){function d(a){return console.log("Failed to get data from classes service",a),c.reject(a)}function e(a){return b({method:"GET",url:"https://maps.raleighnc.gov/class/class.php?&ids="+a})}function f(b,c){null!==b&&a.forEach(b,function(a){a.START_DATE&&(a.sDate=new Date(Date.parse(a.START_DATE.substring(0,a.START_DATE.length-2))));var b=a.SECTION.replace(/\W+/gi,"").toLowerCase();c[b]?c[b].push(a):(c[b]=[a],h[b].urlName=b,c.sections.push(h[b]))})}function g(a){for(var b=0;b<i.length;b++)if(i[b].name===a)return i[b].ids}var h={adventure:{name:"Adventure",urlName:"adventure",icon:"img/icons/classes/adventure.svg"},aquatic:{name:"Aquatic",urlName:"aquatic",icon:"img/icons/classes/aquatic.svg"},art:{name:"Art",urlName:"art",icon:"img/icons/classes/art.svg"},athleticteamsleagues:{name:"Athletic Teams and Leagues",urlName:"athleticteamsleagues",icon:"img/icons/classes/leagues.svg"},citywidespecialevents:{name:"Special Events",urlName:"citywidespecialevents",icon:"img/icons/classes/special-events.svg"},educational:{name:"Educational",urlName:"educational",icon:"img/icons/classes/educational.svg"},fitness:{name:"Fitness",urlName:"fitness",icon:"img/icons/classes/fitness.svg"},nature:{name:"Nature",urlName:"nature",icon:"img/icons/classes/nature.svg"},schoolprograms:{name:"School Programs",urlName:"schoolprograms",icon:"img/icons/classes/school.svg"},social:{name:"Social",urlName:"social",icon:"img/icons/classes/social.svg"},specializedrecreation:{name:"Specialized Recreation",urlName:"specializedrecreation",icon:"img/icons/classes/specialized-recreation.svg"},sports:{name:"Sports",urlName:"sports",icon:"img/icons/classes/sports.svg"},summercampspecializedrecreation:{name:"Summer Camp - Specialized Recreation",urlName:"summercampspecializedrecreation",icon:"img/icons/classes/summer-camp-spec.svg"},summercampspecialty:{name:"Summer Camp - Specialty",urlName:"summercampspecialty",icon:"img/icons/classes/summer-camp.svg"},summercamptraditional:{name:"Summer Camp - Traditional",urlName:"summercamptraditional",icon:"img/icons/classes/summer-camp.svg"}},i=[{ids:"30,74",name:"Anderson Point Park"},{ids:"82,83",name:"Annie Louise Wilkerson, MD Nature Preserve Park"},{ids:"23",name:"Apollo Heights Park"},{ids:"57",name:"Baileywick Road Park"},{ids:"68",name:"Barwell Road"},{ids:"7,50",name:"Biltmore Hills"},{ids:"33",name:"Brentwood Park"},{ids:"69",name:"Brier Creek Park"},{ids:"60",name:"Brookhaven Nature Park"},{ids:"58,89",name:"Buffaloe Road Athletic Park"},{ids:"11",name:"Campbell Lodge"},{ids:"8",name:"Carolina Pines Park"},{ids:"34",name:"Cedar Hills Park"},{ids:"9,54",name:"John Chavis Memorial Park"},{ids:"11",name:"Durant Nature Preserve"},{ids:"35",name:"Eastgate Park"},{ids:"75",name:"Fallon Park"},{ids:"36",name:"Fred Fletcher Park"},{ids:"62",name:"Gardner"},{ids:"39",name:"Glen Eden Pilot Park"},{ids:"10",name:"Green Road Park"},{ids:"77",name:"Greystone Recreation Center"},{ids:"12",name:"Halifax Park"},{ids:"90",name:"Hill Street Park"},{ids:"72",name:"Honeycutt Park"},{ids:"81",name:"Isabella Cannon Park"},{ids:"2,13",name:"Jaycee Park"},{ids:"42",name:"John P Top Greene Park"},{ids:"37",name:"Kentwood Park"},{ids:"38",name:"Kiwanis Park"},{ids:"14",name:"Lake Johnson Park"},{ids:"14",name:"Lake Johnson Nature Preserve"},{ids:"53",name:"Lake Johnson Pool"},{ids:"16",name:"Lake Lynn"},{ids:"15",name:"Lake Wheeler Park"},{ids:"3",name:"Laurel Hills Park"},{ids:"17",name:"Lions Park"},{ids:"52",name:"Longview Park"},{ids:"46",name:"Marsh Creek Park"},{ids:"19",name:"Method Park"},{ids:"6,18,43,88",name:"Millbrook Exchange Park"},{ids:"56",name:"Moore Square"},{ids:"64",name:"Mordecai Square"},{ids:"84",name:"Nash Square"},{ids:"48",name:"North Hills Park"},{ids:"45",name:"Oakwood Park"},{ids:"1,20",name:"Optimist Park"},{ids:"59",name:"Peach Road Park"},{ids:"40",name:"Powell Drive Park"},{ids:"4,21,22,49",name:"Pullen Park"},{ids:"5",name:"Pullen Arts Center"},{ids:"4,21,22,49",name:"Pullen Amusement"},{ids:"91",name:"Raleigh City Museum"},{ids:"51",name:"Ridge Road"},{ids:"24",name:"Roberts Park"},{ids:"86",name:"Rose Garden & Little Theatre"},{ids:"41",name:"Sanderford Road Park"},{ids:"25",name:"Sertoma Arts Center"},{ids:"55",name:"Shelley Lake Park"},{ids:"31",name:"Southgate Park"},{ids:"47",name:"Spring Forest Road Park"},{ids:"26,80",name:"Tarboro Road Park"},{ids:"76",name:"Tucker House"},{ids:"29",name:"Walnut Creek Softball Complex"},{ids:"78",name:"Walnut Creek Wetland Center"},{ids:"87",name:"Whitaker Mill"},{ids:"44",name:"Williams Park"},{ids:"61",name:"Windemere Beaver Dam Park"},{ids:"28",name:"Worthdale Park"}];return{getParkClasses:e,getParkIds:g,processClasses:f,logError:d}}])}(window.angular),angular.module("appServices").factory("httpInterceptor",["$q","$rootScope",function(a,b){var c=0;return{request:function(d){return 1===++c&&b.$broadcast("loading:progress"),d||a.when(d)},response:function(d){return--c<=0&&b.$broadcast("loading:finish"),d||a.when(d)},responseError:function(d){return--c<=0&&b.$broadcast("loading:finish"),a.reject(d)}}}]),angular.module("appFilters").filter("parkAmenities",function(){return function(a,b){if(!b)return a;var c=[];return angular.forEach(a,function(a){var c=a.parkAttr.toLowerCase();b[c]&&this.push(a)},c),c}}),angular.module("appFilters").filter("selectedActivities",function(){var a=[];return function(b,c){return console.log(b),console.log(c),c.length<=0?b:(a.splice(0,a.length),b.forEach(function(b){for(var d=0;d<c.length;d++)b[c[d].name.replace(/\s+/g,"").toLowerCase()]&&a.push(b)}),a)}}),angular.module("appControllers").controller("navbarCtrl",["$scope","$rootScope","deviceService","$mdSidenav",function(a,b,c,d){a.progress="indeterminate",a.isMobile=c.isMobile,a.toggleSidenav=function(){d("left").toggle()},b.$on("loading:progress",function(){a.progress="indeterminate"}),b.$on("loading:finish",function(){a.progress=void 0})}]),angular.module("appControllers").controller("devicesCtrl",["$scope","deviceService","$mdToast",function(a,b,c){a.isMobile=b.isMobile,b.isIE()?c.show({hideDelay:0,position:"top right",controller:"ToastCtrl",templateUrl:"views/partials/ie-warning-toast.html"}).then(function(a){b.activeToast.resolve(a)}):b.activeToast.resolve("Good to go!"),a.showTab=function(b){return a.isMobile()&&a.activeTab.name!==b}}]).controller("ToastCtrl",["$scope","$mdToast",function(a,b){a.closeToast=function(){b.hide("Ok")}}]),function(a){"use strict";a.module("appControllers").controller("mapCtrl",["$scope","$state","amenitiesService","Esri","$mdDialog",function(a,b,c,d,e){d.modulesReady().then(function(a){function d(a){var b=a.graphic.attributes.NAME;return g(b,a)}function e(a){var b=c.activities[a.graphic.attributes.SUBCATEGORY].name;return g(b,a)}function f(a){return g("Greenway Trail",a)}function g(b,c){return i.setContent(b),a.dijitPopup.open({popup:i,x:c.pageX+10,y:c.pageY+10}),!1}function h(){a.dijitPopup.close(i)}a.map.on("extent-change",function(b){a.basemapLayer.visible||(a.queryInstance.geometry=b.extent.getCenter(),a.aerialLayer2015Query.executeForCount(a.queryInstance,function(b){var c=0===b;a.aerialLayer2013.setVisibility(c),a.aerialLayer.setVisibility(!c)}))}),c.getAmenitiesIcons().then(function(b){var c=b.data,d=new a.UniqueValueRenderer({type:"uniqueValue",field1:"SUBCATEGORY",uniqueValueInfos:c}),e=new a.UniqueValueRenderer({type:"uniqueValue",field1:"SUBCATEGORY",uniqueValueInfos:c});a.amenities1.setRenderer(d),a.amenities2.setRenderer(e),a.amenities1.setMinScale(5e3),a.amenities2.setMinScale(5e3),a.map.addLayers([a.amenities1,a.amenities2])}),a.parks.on("touchend, click, mouse-down",function(a){var c=a.graphic.attributes.NAME.toLowerCase().replace(/\W+/g,"");b.go("home.park",{name:c}),h()});var i=new a.TooltipDialog({id:"tooltip"});i.startup(),a.parks.on("mouse-over",d),a.parks.on("mouse-out",h),a.amenities1.on("mouse-over",e),a.amenities1.on("mouse-out",h),a.amenities2.on("mouse-over",e),a.amenities2.on("mouse-out",h),a.greenways.on("mouse-over",f),a.greenways.on("mouse-out",h),a.greenways2.on("mouse-over",f),a.greenways2.on("mouse-out",h)}),a.openKey=function(a){e.show({templateUrl:"views/partials/key-dialog.html",targetEvent:a,fullscreen:!0,clickOutsideToClose:!0,controller:"DialogCtrl",locals:{activities:c.activities.categoriesArr},bindToController:!0})}}])}(window.angular),function(a,b){"use strict";a.module("appControllers").controller("autocompleteCtrl",["$scope","googleMaps","mapService","$mdSidenav",function(a,c,d,e){var f,g;c.isReady().then(function(b){g=document.getElementById(a.inputId);var c={componentRestrictions:{country:"us"}};f=new b.places.Autocomplete(g,c),f.addListener("place_changed",h);var d=new b.Circle({center:{lat:35.79741992502266,lng:-78.64118938203126},radius:15e3});f.setBounds(d.getBounds())});var h=function(){e("left").close(),g.value="";var a=f.getPlace().geometry.location;b("send","event","Location","geocoded",a.lat()+","+a.lng()),d.updateUserCoords(a.lat(),a.lng())}}])}(angular||window.angular,ga),angular.module("appControllers").controller("DialogCtrl",["$scope","$mdDialog","amenitiesService",function(a,b,c){a.activities=c.activities.categoriesArr,a.hide=function(){b.hide()},a.cancel=function(){b.cancel()},a.answer=function(a){b.hide(a)}}]),function(a,b){"use strict";a.module("appControllers").controller("parkCtrl",["$scope","currentPark","maps","amenitiesService","$filter","deviceService","Esri",function(a,c,d,e,f,g,h){h.modulesReady().then(function(b){a.myLocation=function(){return b.userMarker.geometry}}),a.maps=d,a.currentPark=c,a.activitiesInPark=f("parkAmenities")(e.activities.categoriesArr,c),a.scrollTo=g.scrollTo,b("send","event","Parks","selected",c.name,c.id)}])}(angular||window.angular,ga),angular.module("appControllers").controller("classesCtrl",["$scope","classesService","$state","deviceService",function(a,b,c,d){function e(c){b.processClasses(c.data,a.classes)}var f=b.getParkIds(a.currentPark.name);a.classes={sections:[]},a.scrollTo=d.scrollTo,a.goToSection=function(a){c.go("home.park.section",{sectionName:a})},b.getParkClasses(f).then(e,b.logError)}]),angular.module("appControllers").controller("sectionCtrl",["$scope","classesService","$stateParams",function(a,b,c){a.sectionName=c.sectionName,a.classes=a.$parent.$parent.classes,a.sortOptions=[{model:"sDate",view:"the earliest"},{model:"-sDate",view:"the latest"},{model:"COURSE",view:"course title (A-Z)"},{model:"-COURSE",view:"course title (Z-A)"},{model:"ACTIVITY",view:"activity title (A-Z)"},{model:"-ACTIVITY",view:"activity title (Z-A)"}],a.sortQuery=a.sortOptions[0]}]),function(a){"use strict";a.module("appDirectives").directive("fadeUpWhenReady",["$document",function(a){return{restrict:"A",compile:function(b,c){var d={opacity:c.opacity||0,"-webkit-transform":"translateY("+(c.offset||100)+"px)","-moz-transform":"translateY("+(c.offset||100)+"px)","-o-transform":"translateY("+(c.offset||100)+"px)","-ms-transform":"translateY("+(c.offset||100)+"px)",transform:"translateY("+(c.offset||100)+"px)","-webkit-transition":"all "+(c.duration||600)+"ms cubic-bezier(0.345, 0, 0.25, 1)","-moz-transition":"all "+(c.duration||600)+"ms cubic-bezier(0.345, 0, 0.25, 1)","-o-transition":"all "+(c.duration||600)+"ms cubic-bezier(0.345, 0, 0.25, 1)","-ms-transition":"all "+(c.duration||600)+"ms cubic-bezier(0.345, 0, 0.25, 1)",transition:"all "+(c.duration||600)+"ms cubic-bezier(0.345, 0, 0.25, 1)"};b.css(d),a.ready(function(){var a={opacity:1,"-webkit-transform":"translateY(0)","-moz-transform":"translateY(0)","-o-transform":"translateY(0)","-ms-transform":"translateY(0)",transform:"translateY(0)"};b.css(a)})}}}])}(angular||window.angular),function(a){"use strict";a.module("appDirectives").directive("toggleList",["$timeout",function(a){return{restrict:"A",link:function(b,c,d){function e(){return d.currentList}function f(){var a,b;return b=c.prop("clientHeight")+"px",c.addClass("no-transition"),g("auto"),a=c.prop("clientHeight")+"px",g(b),c.removeClass("no-transition"),a}function g(a){c.css("height",a)}function h(b){c.addClass("no-transition"),g(b),a(function(){c.removeClass("no-transition")},0,!1)}function i(b,c){b===d.listName?(a(g,0,!1,f()),j=a(h,695,!1,"auto")):c===d.listName&&(j?(a.cancel(j),j=null):h(f()),a(g,0,!1,0)),j&&j.then(function(){j=null})}var j;g(0),b.$watch(e,i)}}}])}(angular||window.angular),function(a){"use strict";a.module("appDirectives").directive("activitiesSelection",function(){return{restrict:"E",scope:{},templateUrl:"views/directives/activities-selection.html",controller:["$scope","amenitiesService","parkService",function(b,c,d){function e(b){var c=a.lowercase(b);return function(a){return a.searchable.indexOf(c)>-1}}function f(a){return a?b.activities.categoriesArr.filter(e(a)):b.activities.categoriesArr}function g(a){return a}function h(a){return a.filter(function(a){return a.selected})}function i(a){for(var c=0;c<b.activityChips.length;c++)if(b.activityChips[c].name===a.name)return b.activityChips.splice(c,1);b.activityChips.push(a)}b.activityChips=[],b.updateParks=d.updateParkMarkers,b.activities=c.activities,b.parks=d.parks.markers,b.toggleSelected=function(a,c){a.selected="md-switch"===c?a.selected:!a.selected,"md-chips"!==c&&i(a),b.updateParks(h(b.activities.categoriesArr))},b.toggleSwitch=function(a){i(a),b.updateParks(h(b.activities.categoriesArr))},b.search={selectedItem:void 0,searchText:void 0,querySearch:f,transformChip:g}}]}})}(window.angular),function(a){"use strict";a.module("appDirectives").directive("locationSelection",function(){return{restrict:"E",scope:{},templateUrl:"views/directives/location-selection.html",controller:["$scope","Esri","mapService","$mdSidenav",function(a,b,c,d){a.geolocate=function(){d("left").close(),c.geoLocate()}}]}})}(window.angular),function(a){"use strict";a.module("appDirectives").directive("aerialToggle",function(){return{restrict:"E",transclude:!0,replace:!0,template:'<div id="aerial-toggle" class="flex layout-row" ng-transclude></div>',controller:["$scope","Esri",function(a,b){b.modulesReady().then(function(b){a.aerial=!1,a.select=function(c){a.aerial="aerial"===c,b.aerialLayer.setVisibility(a.aerial),b.aerialLayer2013.setVisibility(a.aerial),b.map.setExtent(b.map.extent),b.aerialLabels.setVisibility(a.aerial),b.basemapLayer.setVisibility(!a.aerial)}})}]}})}(window.angular),function(a){"use strict";a.module("appDirectives").directive("locationTracker",function(){return{restrict:"E",templateUrl:"views/directives/location-tracker.html",replace:!0,controller:["$scope","Esri",function(a,b){var c,d,e;c={enableHighAccuracy:!0,timeout:6e4,maximumAge:3e4},b.modulesReady().then(function(b){function f(c){var d,f;a.$apply(function(){a.watching=!0}),d=c.coords.latitude,f=c.coords.longitude,b.trackerGraphic.setGeometry(new b.Point([f,d])),b.userMarker.hide(),b.map.centerAt([f,d]).then(function(){e=b.map.on("mouse-drag-start",g)})}function g(){a.$apply(function(){a.watching=!1}),navigator.geolocation.clearWatch(d),b.userMarker.show(),d=null,e.remove()}function h(a){console.warn("ERROR("+a.code+"): "+a.message)}a.trackUser=function(){setTimeout(function(){d?g():d=navigator.geolocation.watchPosition(f,h,c)},0)}})}]}})}(window.angular),function(a){"use strict";a.module("appDirectives").directive("parkSelection",function(){return{restrict:"E",scope:{},templateUrl:"views/directives/park-selection.html",controller:["$scope","parkService","mapService","$timeout","$mdSidenav","Esri",function(b,c,d,e,f,g){function h(b){var c=a.lowercase(b);return function(a){return a.searchable.indexOf(c)>-1}}function i(a){return a?b.parks.markers.filter(h(a)):b.parks.markers}b.parks=c.parks,b.search={selectedItem:void 0,searchText:void 0,selectedItemChange:function(c){a.isUndefined(c)||b.selectPark(c)},querySearch:i},b.selectPark=function(a){a.markerClick(a),f("left").close(),d.centerAndZoom(a.latitude,a.longitude)},g.modulesReady().then(function(a){function c(b){var c=Math.abs(b.latitude-a.userMarker.geometry.y),d=Math.abs(b.longitude-a.userMarker.geometry.x);return b.distance=Math.sqrt(Math.pow(c,2)+Math.pow(d,2)),b.distance}b.sortOptions=[{view:"name (A-Z)",model:"name",reverse:!1},{view:"name (Z-A)",model:"name",reverse:!0},{view:"distance (nearest)",model:c,reverse:!1},{view:"distance (furthest)",model:c,reverse:!0}],b.selectedSort=b.sortOptions[2]})}]}})}(angular||window.angular),function(a){"use strict";a.module("appDirectives").directive("gmapsAddress",["$timeout",function(b){return{restrict:"AE",transclude:!0,replace:!0,template:"<div ng-transclude></div>",scope:{inputId:"="},controller:"autocompleteCtrl",link:function(c,d){var e=function(){var c=a.element(document.getElementsByClassName("pac-container"));return 0===c.length?b(function(){e()},200):(c.detach(),void d.append(c))};e()}}}])}(window.angular),function(a){"use strict";a.module("appDirectives").directive("mapActions",function(){return{restrict:"E",replace:!0,templateUrl:"views/directives/map-actions.html",controller:["$scope","mapService","$mdDialog","amenitiesService",function(a,b,c,d){a.geoLocate=b.geoLocate,a.editLocation=function(a){c.show({templateUrl:"views/partials/edit-location-dialog.html",targetEvent:a,fullscreen:!0,clickOutsideToClose:!0,controller:"DialogCtrl",bindToController:!0})},a.openKey=function(a){c.show({templateUrl:"views/partials/key-dialog.html",targetEvent:a,fullscreen:!0,clickOutsideToClose:!0,controller:"DialogCtrl",locals:{activities:d.activities.categoriesArr},bindToController:!0})},a.speedDial={hidden:!1,isOpen:!1,openDirection:"left",items:[{tooltipVisible:!1,name:"Find Me!",tooltipDirection:"top",icon:"img/icons/find-me.svg",action:a.geoLocate,addIconClass:"find-me"},{tooltipVisible:!1,name:"Change My Location",tooltipDirection:"top",icon:"img/icons/person-pin.svg",action:a.editLocation,addIconClass:"person-pin"},{tooltipVisible:!1,name:"Key",tooltipDirection:"top",icon:"img/icons/help.svg",action:a.openKey}]}}]}})}(window.angular),function(a){"use strict";a.module("appDirectives").directive("sidenavContent",function(){return{restrict:"E",templateUrl:"views/directives/sidenav-content.html",controller:["$scope","$timeout",function(a,b){a.currentList="",b(function(){a.currentList="location"},1e3),a.toggleList=function(b){a.currentList=a.currentList===b?"":b}}]}})}(window.angular),angular.module("appDirectives").directive("ngNavbar",function(){return{restrict:"E",replace:!0,templateUrl:"views/directives/navbar.html",controller:"navbarCtrl"}}),angular.module("appDirectives").directive("ngFooter",function(){return{restrict:"E",replace:!0,templateUrl:"views/directives/footer.html"}}),angular.module("appDirectives").directive("collapseFooter",["$document","$timeout","deviceService",function(a,b,c){return{restrict:"E",replace:!0,templateUrl:"views/directives/collapse-footer.html",link:function(d,e){a.ready(function(){function a(){d.toggleClass("collapsed"),e.children().toggleClass("rotated"),angular.element(document.getElementById("back-to-top")).toggleClass("lower")}var d=angular.element(document.getElementById("footer")),f=!1;c.isMobile()&&a(),e.on("click",function(){f||(f=!0,a(),b(function(){f=!1},500))})})}}}]),angular.module("appDirectives").directive("backToTop",function(){return{restrict:"E",transclude:!0,replace:!0,template:'<div id = "back-to-top" ng-transclude></div>',link:function(a,b){var c=b.parent(),d=angular.element(document.getElementById("footer"));c.on("scroll",function(){d.hasClass("collapsed")?b.addClass("lower"):b.removeClass("lower"),this.scrollTop>=50?b.addClass("bring-to-screen"):b.removeClass("bring-to-screen")}),a.scroll=function(){c.scrollTopAnimated(0,800)}}}}),angular.module("appDirectives").directive("fixOnScroll",["$window",function(a){return{restrict:"A",link:function(b,c,d){a.innerWidth>=768||angular.element(a).bind("scroll",function(){this.pageYOffset>=d.fixOnScroll?c.css({height:"41px"}).children().addClass("fixed"):c.css({height:"auto"}).children().removeClass("fixed")})}}}]),function(a){"use strict";a.module("appDirectives").directive("mainMap",function(){return{controller:"mapCtrl",restrict:"E",templateUrl:"views/directives/main-map.html",replace:!0
}})}(window.angular),angular.module("appDirectives").directive("scrollingButtons",function(){return{restrict:"A",transclude:!0,templateUrl:"views/directives/scrolling-buttons.html",link:function(a,b){function c(a,b){if(!g){var c,d,e,h,i=null,j=0,k=400,l=b-a,m=function(a){return.5>a?4*a*a*a:(a-1)*(2*a-2)*(2*a-2)+1},n=function(){i=f.scrollTop,e=f.scrollHeight,h=f.clientHeight+i,(d===b||i===b||h>=e)&&(clearInterval(p),g=!1)},o=function(){j+=16,c=j/k,c=c>1?1:c,d=a+l*m(c),f.scrollTop=d,n()};g=!0;var p=setInterval(o,16)}}var d=angular.element(b.children().children()[0]),e=angular.element(b.children().children()[2]),f=b.children().children()[1],g=!1,h=function(){f.scrollTop<=0&&d.removeClass("show-button"),f.scrollTop>=f.scrollHeight-f.clientHeight&&e.removeClass("show-button"),f.scrollTop>0&&f.scrollTop<f.scrollHeight-f.clientHeight&&(e.addClass("show-button"),d.addClass("show-button"))};angular.element(f).on("scroll",h),a.scrollup=function(){c(f.scrollTop,f.scrollTop-f.clientHeight)},a.scrolldown=function(){c(f.scrollTop,f.scrollTop+f.clientHeight)}}}}),angular.module("appDirectives").directive("classesInfo",function(){return{controller:"classesCtrl",restrict:"E",templateUrl:"views/directives/classes.html",scope:{currentPark:"="}}}),function(a){"use strict";a.module("appDirectives").directive("directionsMap",function(){return{restrict:"E",scope:!1,template:'<div id="directions-map" class="flex-100"></div>',controller:["$scope","Esri",function(a,b){a.Esri=b}],link:function(a,b){function c(b,c){var e=d(b,c),g={origin:new a.maps.LatLng(b.y,b.x),destination:new a.maps.LatLng(c.latitude,c.longitude),travelMode:e};k.route(g,f)}function d(b,c){return a.$parent.travelMode=c.distance>.011?"fa-car":"fa-male",c.distance<=.011?a.maps.TravelMode.WALKING:a.maps.TravelMode.DRIVING}function e(){return m={start:new a.maps.MarkerImage("img/icons/user-marker.svg",new a.maps.Size(52,52),new a.maps.Point(0,0),new a.maps.Point(24,46)),end:new a.maps.MarkerImage("img/icons/park-marker.svg",new a.maps.Size(48,48),new a.maps.Point(0,0),new a.maps.Point(25,46))}}function f(b,c){c===a.maps.DirectionsStatus.OK?(l.setDirections(b),g(b),i(b)):console.error("Error",c,b)}function g(a){var b=a.routes[0].legs[0];h(b.start_location,m.start,"You"),h(b.end_location,m.end,"Park")}function h(b,c,d){q[q.length-2]&&q[q.length-2].setMap(null);var e=new a.maps.Marker({position:b,map:n,icon:c,title:d,animation:a.maps.Animation.DROP});q.push(e)}function i(b){var c=b.routes[0].legs[0],d=c.distance.text,e=c.duration.text;a.$parent.routeData={distance:d,duration:e};var f=parseInt(d),g=parseInt(e);a.$parent.distanceColoring={"text-success":3>=f||"ft"===d.substring(d.length-2,d.length),"text-warn":f>3&&10>=f&&"ft"!==d.substring(d.length-2,d.length),"text-danger":f>10&&"ft"!==d.substring(d.length-2,d.length)},a.$parent.durationColoring={"text-success":10>=g,"text-warn":g>10&&20>=g,"text-danger":g>20}}function j(){var b=n.getCenter();a.maps.event.trigger(n,"resize"),n.setCenter(b)}var k,l,m,n,o={zoom:16,scrollwheel:!1,center:void 0,mapTypeControlOptions:{mapTypeIds:[a.maps.MapTypeId.ROADMAP,"light_dream"]}},p=[{featureType:"water",stylers:[{visibility:"on"},{color:"#b5cbe4"}]},{featureType:"landscape",stylers:[{color:"#efefef"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#83a5b0"}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#bdcdd3"}]},{featureType:"road.local",elementType:"geometry",stylers:[{color:"#ffffff"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#e3eed3"}]},{featureType:"administrative",stylers:[{visibility:"on"},{lightness:33}]},{featureType:"road"},{featureType:"poi.park",elementType:"labels",stylers:[{visibility:"on"},{lightness:20}]},{},{featureType:"road",stylers:[{lightness:20}]}],q=[];a.Esri.modulesReady().then(function(d){function f(){return d.userMarker.geometry}function g(b){c(b,a.currentPark)}!function(){k=new a.maps.DirectionsService,l=new a.maps.DirectionsRenderer({suppressMarkers:!0}),e(),o.center=new a.maps.LatLng(d.userMarker.geometry.y,d.userMarker.geometry.x),n=new a.maps.Map(b.children()[0],o),a.maps.event.addListenerOnce(n,"idle",j),l.setMap(n),n.mapTypes.set("light_dream",new a.maps.StyledMapType(p,{name:"Light"})),n.setMapTypeId("light_dream")}(),a.$watch(f,g)})}}})}(angular||window.angular),function(a){"use strict";a.module("parkLocator",["appServices","appFilters","appControllers","appDirectives","ui.router","ngMaterial","duScroll","dcbImgFallback","ngAnimate"]).value("duScrollDuration",600).value("duScrollOffset",0).value("duScrollEasing",function(a){return.5>a?4*a*a*a:(a-1)*(2*a-2)*(2*a-2)+1}).config(["$httpProvider",function(a){a.interceptors.push("httpInterceptor"),a.defaults.headers.common["Content-Type"]="application/json; charset=utf-8",a.defaults.cache=!0}]).config(["$mdThemingProvider",function(a){a.theme("altTheme").primaryPalette("purple").accentPalette("red").warnPalette("yellow")}]).config(["$mdIconProvider",function(a){a.defaultIconSet("img/icons/core.svg",48)}]).config(["$stateProvider","$urlRouterProvider",function(a,b){b.otherwise("/"),a.state("home",{url:"/",templateUrl:"views/main.html",controller:"devicesCtrl"}).state("home.park",{url:":name",views:{"":{templateUrl:"views/partials/park-information.html",controller:"parkCtrl"},"classes-info@home.park":{templateUrl:"views/partials/class-section-selection.html",controller:"classesCtrl"}},resolve:{maps:["googleMaps",function(a){return a.isReady()}],currentPark:["parkService","$stateParams","$timeout","$q",function(a,b,c,d){var e=d.defer();return c(a.resolveCurrentPark,0,!1,e,b.name),e.promise}]}}).state("home.park.section",{url:"/:sectionName",views:{"classes-info@home.park":{templateUrl:"views/partials/course-section.html",controller:"sectionCtrl"}}})}])}(angular||window.angular),angular.module("parkLocator").run(["$templateCache",function(a){"use strict";a.put("views/directives/activities-selection.html",'<div class="flex layout-column sidenav-list-item-container"> <md-chips ng-model="activityChips" md-autocomplete-snap md-transform-chip="search.transformChip($chip)" md-require-match="true" md-on-add="toggleSelected($chip, \'md-chips\')" md-on-remove="toggleSelected($chip, \'md-chips\')" class="activity-chips"> <md-autocomplete md-selected-item="search.selectedItem" md-search-text="search.searchText" md-items="activity in search.querySearch(search.searchText)" md-item-text="activity.name" placeholder="Find an activity" md-menu-class="activity-custom-template" md-autoselect="true" md-select-on-match="true"> <md-item-template> <span class="item-title" layout="row"> <md-icon md-svg-icon="{{ activity.icon }}"></md-icon> <span flex="grow" md-highlight-text="search.searchText" md-highlight-flags="ig"> {{ activity.name }} </span> <md-icon md-svg-icon="ok" ng-if="activity.selected"></md-icon> </span> </md-item-template> <md-not-found>No matching activities found.</md-not-found> </md-autocomplete> <md-chip-template> <md-icon md-svg-icon="{{ $chip.icon }}"></md-icon> <span>{{ ::$chip.name }}</span> </md-chip-template> </md-chips> <div layout="row" class="pull-down-sm"> <span flex></span> <span class="text-total-results" ng-class="{\'text-primary\': parks.length > 0, \'text-danger\': parks.length === 0}">Number of Parks: {{ parks.length }}</span> </div> <br> <div scrolling-buttons> <md-list id="activities-list"> <md-list-item class="custom-ripple-item" ng-click="toggleSelected(activity, \'md-list-item\')" ng-repeat="activity in activities.categoriesArr"> <md-icon md-svg-icon="{{ ::activity.icon }}" alt="{{ ::activity.name }}" class="activity-icon"></md-icon> <p class="limit-text capitalize limit-activity-name list-inner-text"> {{ ::activity.name }} </p> <md-switch class="md-secondary" ng-model="activity.selected" ng-change="toggleSelected(activity, \'md-switch\')" aria-label="Toggle activity filter"></md-switch> </md-list-item> </md-list> </div> </div>'),a.put("views/directives/classes.html",'<md-tab label="Classes" ng-if="classes.sections.length" md-on-select="scrollTo(\'park-info\')"> <div class="md-padding classes-container"> <div ui-view="classes-info"></div> </div> </md-tab>'),a.put("views/directives/collapse-footer.html",'<div id="collapse-footer"> <md-button class="md-primary md-icon-button collapse-button" aria-label="Collapse footer"> <md-icon md-font-icon="fa-times" class="fa fa-lg"></md-icon> </md-button> </div>'),a.put("views/directives/footer.html",'<footer id="footer" layout="row"> <div layout="column" flex> <p class="limit-text" flex> Copyright © 2015-2016 | <a class="text-primary" href="https://www.raleighnc.gov/" target="_blank">raleighnc.gov</a> </p> <p class="limit-text" flex> Made with <i class="fa fa-heart"></i> by CORaleigh GIS team </p> </div> <div class="small-font" layout="row"> <md-button aria-label="Icon pack by Icons8" href="https://icons8.com" target="_blank" class="md-icon-button"> <md-tooltip md-direction="top"> Icon pack by Icons8 </md-tooltip> <md-icon md-svg-icon="icons8"></md-icon> </md-button> <md-button aria-label="View Source Code on Github" href="https://github.com/david-meza/park-locator/issues" target="_blank" class="md-icon-button"> <md-tooltip md-direction="top"> Submit an issue or bug </md-tooltip> <md-icon md-svg-icon="img/icons/github.svg"></md-icon> </md-button> <md-button aria-label="Contact Us" href="mailto:parklocator@raleighnc.gov?subject=Park Locator Feedback" class="md-icon-button"> <md-tooltip md-direction="top"> Send Us Feedback </md-tooltip> <md-icon md-svg-icon="img/icons/email.svg"></md-icon> </md-button> </div> </footer>'),a.put("views/directives/location-selection.html",'<div class="flex layout-column sidenav-list-item-container"> <gmaps-address id="address-search-box" input-id="\'edit-my-location\'"> <md-input-container class="md-icon-float md-block address-input-container"> <label>Address</label> <md-icon md-svg-icon="person-pin"></md-icon> <input id="edit-my-location" type="text" placeholder="" class="md-primary"> </md-input-container> </gmaps-address> <md-button class="md-raised md-primary" ng-click="geolocate()"> <md-icon md-svg-icon="find-me"></md-icon> <span class="capitalize">Find Me!</span> </md-button> </div>'),a.put("views/directives/location-tracker.html",'<div id="location-tracker"> <md-button aria-label="watch my location" class="md-fab md-raised" ng-click="trackUser($event)"> <md-tooltip md-direction="left" md-autohide="true">Watch my Location</md-tooltip> <md-icon md-svg-icon="my-location-button" aria-label="my location" ng-class="{active: watching}"></md-icon> </md-button> </div>'),a.put("views/directives/main-map.html",'<div id="map-canvas" class="flex"> <aerial-toggle> <md-button ng-click="select(\'map\')" class="md-raised" ng-class="{ \'selected\': !aerial }">Map</md-button> <md-button ng-click="select(\'aerial\')" class="md-raised" ng-class="{ \'selected\': aerial }">Aerial</md-button> </aerial-toggle> <div id="map-key"> <md-button aria-label="Key" class="md-fab md-raised" ng-click="openKey($event)"> <md-tooltip md-direction="left" md-autohide="true">Key</md-tooltip> <md-icon md-svg-icon="help" aria-label="key"></md-icon> </md-button> </div> <location-tracker></location-tracker> </div>'),a.put("views/directives/map-actions.html",'<md-fab-speed-dial ng-hide="speedDial.hidden" md-direction="{{ ::speedDial.openDirection }}" md-open="speedDial.isOpen" class="md-scale md-fab-bottom-right" id="map-actions"> <md-fab-trigger> <md-button aria-label="Map Actions" class="md-raised md-fab"> <md-tooltip md-direction="top">Map Actions</md-tooltip> <md-icon md-svg-icon="img/icons/settings.svg" aria-label="actions"></md-icon> </md-button> </md-fab-trigger> <md-fab-actions> <div ng-repeat="item in speedDial.items"> <md-button aria-label="{{::item.name}}" class="md-fab md-raised md-mini" ng-click="item.action($event)"> <md-tooltip md-direction="{{::item.tooltipDirection}}" md-visible="item.tooltipVisible" md-autohide="true" md-delay="50"> {{::item.name}} </md-tooltip> <md-icon md-svg-icon="{{::item.icon}}" ng-class="item.addIconClass" aria-label="{{::item.name}}"></md-icon> </md-button> </div> </md-fab-actions> </md-fab-speed-dial>'),a.put("views/directives/navbar.html",'<md-toolbar layout="row" id="navbar" class="gradient-primary"> <div class="md-toolbar-tools" layout="row" layout-align="start center"> <md-button class="md-icon-button" aria-label="open menu side nav" hide-gt-sm ng-click="toggleSidenav()"> <md-icon md-svg-icon="menu"></md-icon> </md-button> <a ui-sref="home" class="app-title">Park Locator</a> <md-progress-circular class="md-accent md-hue-2 progress-spinner" md-mode="{{ progress }}" md-diameter="55"></md-progress-circular> </div> </md-toolbar>'),a.put("views/directives/park-selection.html",'<div class="flex layout-column sidenav-list-item-container"> <md-autocomplete md-selected-item="search.selectedItem" md-search-text="search.searchText" md-selected-item-change="search.selectedItemChange(park)" md-items="park in search.querySearch(search.searchText)" md-item-text="park.name" placeholder="Park Name" md-menu-class="park-custom-template" md-autoselect="true" md-select-on-match="true" class="parks-autocomplete"> <md-item-template> <span class="item-title" md-highlight-text="search.searchText" md-highlight-flags="ig"> {{ park.name }} </span> </md-item-template> <md-not-found>No matching park names found.</md-not-found> </md-autocomplete> <div class="sort-by-text layout-align-end-center layout-row"> <span class="text-primary text-before-dropdown">Sort by</span> <md-select ng-model="selectedSort" aria-label="Select Park Sorter" class="inline-dropdown text-primary" md-container-class="inline-dropdown"> <md-option ng-value="::option" ng-repeat="option in sortOptions">{{ ::option.view }}</md-option> </md-select> </div> <div scrolling-buttons> <md-list id="parks-list"> <md-list-item class="custom-ripple-item" ng-click="selectPark(park)" ng-repeat="park in parks.markers | orderBy : selectedSort.model : selectedSort.reverse"> <span class="limit-text capitalize list-inner-text"> {{ ::park.name }} </span> <span class="park-distance list-inner-text" ng-show="park.distance"> <i class="fa fa-fw fa-location-arrow"></i>Apx. {{ park.distance * 85 | number: 1 }}mi </span> </md-list-item> </md-list> </div> </div>'),a.put("views/directives/scrolling-buttons.html",'<div style="position: relative"> <div class="scroll-button-top"> <md-button ng-click="scrollup()" class="md-icon-button md-primary md-button-top" aria-label="Scroll up in panel"> <md-icon md-font-icon="fa-chevron-up" class="fa fa-lg"></md-icon> </md-button> </div> <div ng-transclude class="panel-scrollable"></div> <div class="scroll-button-bottom show-button"> <md-button class="md-icon-button md-primary md-button-bottom" aria-label="Scroll down in panel"> <md-icon ng-click="scrolldown()" md-font-icon="fa-chevron-down" class="fa fa-lg"></md-icon> </md-button> </div> </div>'),a.put("views/directives/sidenav-content.html",'<header class="nav-header"> <a ui-sref="home" class="parks-logo"> <img src="img/icons/parks-logo-white.svg" alt="Parks Logo"> <!-- <h1 class="header-title">Park Locator</h1> --> </a> </header> <md-list> <md-list-item ng-click="toggleList(\'location\')" class="md-secondary menu-item"> <span flex>Set My Location</span> <md-icon md-font-icon="fa-chevron-down" class="fa text-light list-icon" ng-class="{ rotate: currentList === \'location\' }"></md-icon> </md-list-item> <location-selection ng-cloak class="layout-column flex selection-menu" toggle-list list-name="location" current-list="{{currentList}}"></location-selection> <md-list-item ng-click="toggleList(\'activities\')" class="md-secondary menu-item"> <span flex>Choose an Activity</span> <md-icon md-font-icon="fa-chevron-down" class="fa text-light list-icon" ng-class="{ rotate: currentList === \'activities\' }"></md-icon> </md-list-item> <activities-selection ng-cloak class="layout-column flex selection-menu" toggle-list list-name="activities" current-list="{{currentList}}"></activities-selection> <md-list-item ng-click="toggleList(\'parks\')" class="md-secondary menu-item"> <span flex>Choose a Park</span> <md-icon md-font-icon="fa-chevron-down" class="fa text-light list-icon" ng-class="{ rotate: currentList === \'parks\' }"></md-icon> </md-list-item> <park-selection ng-cloak class="layout-column flex selection-menu" toggle-list list-name="parks" current-list="{{currentList}}"></park-selection> </md-list>'),a.put("views/main.html",'<md-content id="main-scrollable" class="flex layout-column" du-scroll-container> <main-map></main-map> <div ui-view id="park-info"></div> <back-to-top> <md-button class="md-accent md-raised md-fab md-mini" aria-label="Back to Top" ng-click="scroll()"> <md-icon md-font-icon="fa-angle-double-up" class="fa fa-lg"></md-icon> </md-button> </back-to-top> </md-content>'),a.put("views/partials/class-section-selection.html",'<h3 class="text-center">What kind of classes interest you?</h3> <div id="class-sections" flex layout="row" layout-wrap layout-align="center stretch"> <md-card ng-repeat="section in classes.sections" ng-click="goToSection(section.urlName)" class="icon-card"> <md-card-content> <md-icon class="icon-contain" md-svg-icon="{{ ::section.icon }}" alt="{{ ::section.name }}"></md-icon> </md-card-content> <md-card-footer> <h3 class="limit-text capitalize icon-name">{{ ::section.name }}</h3> </md-card-footer> </md-card> </div>'),a.put("views/partials/course-section.html",'<div layout="row" layout-align="space-between center"> <md-input-container class="md-icon-float md-block classes-search-container"> <label>Search</label> <md-icon md-svg-icon="search" class="search-icon"></md-icon> <input ng-model="textSearch" type="search"> <div class="hint">This will show only cards matching the text</div> </md-input-container> <md-button class="md-primary md-hue-1 back-to-sections" ui-sref="^">Back To Class Categories</md-button> </div> <div layout="row" layout-align="start center" style="height:40px"> <span class="text-primary text-before-dropdown">Show classes starting with</span> <md-select ng-model="sortQuery" aria-label="Sort course details" class="inline-dropdown text-primary" md-container-class="inline-dropdown"> <md-option ng-value="::option" ng-repeat="option in sortOptions">{{ ::option.view }}</md-option> </md-select> </div> <div class="course-details" layout="row" layout-wrap layout-align="space-between center"> <div class="md-card" ng-class-odd="\'odd-card\'" ng-repeat="course in classes[sectionName] | filter: textSearch | orderBy: sortQuery.model as filteredClasses" flex="100" flex-gt-xs="45" flex-gt-md="30"> <div class="md-card-content" layout="column"> <span class="limit-text class-detail" flex> <md-icon md-svg-icon="course" class="icon-course"></md-icon> <b>Course:</b> {{ course.COURSE || \'No Course Preview\' }} </span> <span class="limit-text class-detail" flex> <md-icon md-svg-icon="activity" class="icon-activity"></md-icon> <b>Activity:</b> {{ course.ACTIVITY || \'No Activity Preview\' }} </span> <span class="limit-text class-detail" flex> <md-icon md-svg-icon="calendar-date" class="icon-start-date"></md-icon> <b>Start Date:</b> {{ (course.START_DATE | date : \'MMM d, y h:mm a\') || \'No Date Specified\' }} </span> </div> <div layout="row" layout-align="end center" class="card-actions md-card-actions"> <md-button ng-href="https://reclink.raleighnc.gov/Activities/ActivitiesCourseDetails.asp?aid={{course.ACTIVITY_ID}}&cid={{course.COURSE_ID}}" target="_blank" class="md-accent more-info" aria-label="Learn more about this course"> <md-tooltip md-direction="top">Please click again if there is a cookies alert.</md-tooltip> <md-icon aria-label="External Link" md-svg-icon="external-link"></md-icon> More </md-button> </div> </div> </div> <h4 ng-hide="filteredClasses.length"><strong>Oops!</strong> There are no results matching this search. Try different terms.</h4>'),a.put("views/partials/edit-location-dialog.html",'<md-dialog aria-label="Edit Location"> <form> <md-toolbar> <div class="md-toolbar-tools"> <h2>Edit my location</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-icon="fa-times" class="fa fa-2x" aria-label="Close dialog"></md-icon> </md-button> </div> </md-toolbar> <md-dialog-content style="max-width: 800px; max-height: 810px; min-height: 100px; min-width: 400px"> <gmaps-address id="address-search-box" input-id="\'edit-my-location\'"> <md-input-container class="md-icon-float md-block" style="margin-top: 20px; padding-right: 10px"> <label>Address</label> <md-icon md-svg-icon="/img/icons/person-pin.svg"></md-icon> <input id="edit-my-location" type="text" placeholder="" class="md-primary" md-autofocus> </md-input-container> </gmaps-address> </md-dialog-content> <md-dialog-actions layout="row"> <md-button ng-click="hide()" style="margin-right:10px"> Close </md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("views/partials/ie-warning-toast.html",'<md-toast> <span class="md-toast-text">You may experience performance issues in IE. Please use a modern browser such as Chrome, Firefox or Safari.</span> <md-button class="md-highlight" href="http://browsehappy.com" target="_blank"> <span style="color:#EC407A">More info</span> </md-button> <md-button ng-click="closeToast()"> Ok </md-button> </md-toast>'),a.put("views/partials/key-dialog.html",'<md-dialog aria-label="Map Icons Key"> <md-toolbar class="gradient-primary"> <div class="md-toolbar-tools"> <h2>Map Icons Key</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-icon="fa-times" class="fa fa-2x" aria-label="Close dialog"></md-icon> </md-button> </div> </md-toolbar> <md-content id="map-icons-dialog-content"> <md-subheader class="md-primary md-no-sticky">You</md-subheader> <md-list class="map-icons-list"> <div layout="row" layout-xs="column" layout-align="start stretch"> <md-list-item flex="100" flex-gt-xs="50" flex-gt-sm="33"> <img src="/img/icons/my-location.svg" class="md-avatar" alt="location tracking"> <span class="list-item-text">You are here (location tracking)</span> </md-list-item> <md-list-item flex="100" flex-gt-xs="50" flex-gt-sm="33"> <img src="/img/icons/user-marker.svg" class="md-avatar" alt="user marker"> <span class="list-item-text">Point of Reference (distance to parks)</span> </md-list-item> </div> </md-list> <md-divider></md-divider> <md-subheader class="md-primary md-no-sticky">Park Icons</md-subheader> <md-list class="map-icons-list"> <div layout="row" layout-xs="column" layout-align="start stretch"> <md-list-item flex="100" flex-gt-xs="50" flex-gt-sm="33"> <img src="/img/icons/park-marker.svg" class="md-avatar" alt="Park Pin (Location)"> <span class="list-item-text">Park Marker</span> </md-list-item> </div> </md-list> <md-divider></md-divider> <md-subheader class="md-primary md-no-sticky">Activity Icons</md-subheader> <md-list class="map-icons-list"> <div layout="row" layout-xs="column" layout-wrap layout-align="start stretch"> <md-list-item ng-repeat="activity in activities" flex="100" flex-gt-xs="50" flex-gt-sm="33"> <img class="md-avatar" ng-src="{{ ::activity.icon }}" alt="{{ ::activity.name }}"> <span class="list-item-text">{{ ::activity.name }}</span> </md-list-item> </div> </md-list> <md-divider></md-divider> <md-subheader class="md-primary md-no-sticky">Miscellaneous</md-subheader> <md-list class="map-icons-list"> <div layout="row" layout-xs="column" layout-align="start stretch" layout-wrap> <md-list-item flex="100" flex-gt-xs="50" flex-gt-sm="33"> <img src="/img/icons/activities/restroom.svg" class="md-avatar" alt="Restroom"> <span class="list-item-text">Restroom</span> </md-list-item> <md-list-item flex="100" flex-gt-xs="50" flex-gt-sm="33"> <img src="/img/icons/activities/tennis-center.svg" class="md-avatar" alt="Tennis Center"> <span class="list-item-text">Tennis Center</span> </md-list-item> <md-list-item flex="100" flex-gt-xs="50" flex-gt-sm="33"> <img src="/img/icons/activities/library.svg" class="md-avatar" alt="Library"> <span class="list-item-text">Library</span> </md-list-item> </div> </md-list> </md-content> <md-dialog-actions layout="row"> <md-button ng-click="answer(\'ok\')" md-autofocus> Ok! </md-button> </md-dialog-actions> </md-dialog>'),a.put("views/partials/park-information.html",'<md-tabs md-dynamic-height md-border-bottom fade-up-when-ready flex="100" md-stretch-tabs="always" md-center-tabs="true" md-swipe-content="true"> <md-tab md-on-select="scrollTo(\'park-info\')"> <md-tab-label>About This Park</md-tab-label> <md-tab-body> <div class="md-padding" layout="row" layout-xs="column"> <div flex layout="column" layout-align="space-between center"> <md-button class="md-icon-button md-accent button-top-left" ui-sref="^" aria-label="back to main map"> <md-tooltip md-direction="bottom"> Back to Main Map </md-tooltip> <md-icon md-font-icon="fa-chevron-left" class="fa fa-lg"></md-icon> </md-button> <h3 class="current-park-name">{{ ::currentPark.name }}</h3> <div class="img-container"> <img class="img-responsive" fallback-src="https://s3.amazonaws.com/davidmeza/Park_Locator/nophoto.png" ng-src="https://maps.raleighnc.gov/parklocator/images/photos/{{ ::currentPark.urlFormat }}.jpg"> </div> <div layout="column" layout-align="space-between stretch"> <span class="park-detail" ng-show="currentPark.address"><i class="fa fa-fw fa-map-marker"></i> {{ ::currentPark.address }}</span> <span class="park-detail" ng-show="currentPark.phone"><i class="fa fa-fw fa-mobile"></i> {{ ::currentPark.phone }}</span> <span class="park-detail" ng-if="routeData.duration"> <i class="fa fa-fw" ng-class="travelMode"></i> You could be here in <span ng-class="durationColoring"> {{ routeData.duration }}</span> </span> <span class="park-detail" ng-if="routeData.distance"> <i class="fa fa-fw fa-location-arrow"></i> Best route is <span ng-class="distanceColoring"> {{ routeData.distance }}</span> </span> <md-button class="md-primary capitalize list-button" ng-href="{{ ::currentPark.url }}" target="_blank"> <i class="fa fa-fw fa-info-circle color-default"></i> Park Website </md-button> <md-button class="md-primary capitalize list-button" ng-href="https://www.google.com/maps/dir/{{myLocation().y}},{{myLocation().x}}/{{::currentPark.latitude}},{{::currentPark.longitude}}" target="_blank"> <i class="fa fa-fw fa-compass color-default"></i> Open Directions in Google Maps </md-button> </div> </div> <directions-map class="flex layout-column"></directions-map> </div> </md-tab-body> </md-tab> <md-tab label="Things to Do" ng-if="activitiesInPark.length > 0" md-on-select="scrollTo(\'park-info\')"> <div class="md-padding"> <div id="park-amenities" flex layout="row" layout-wrap layout-align="center stretch"> <md-card ng-repeat="activity in activitiesInPark" class="icon-card"> <md-card-content> <md-icon class="icon-contain" md-svg-icon="{{ ::activity.icon }}" alt="{{ ::activity.name }}"></md-icon> </md-card-content> <md-card-footer> <h3 class="limit-text capitalize icon-name flex">{{ ::activity.name }}</h3> </md-card-footer> </md-card> </div> </div> </md-tab> <classes-info current-park="currentPark"></classes-info> </md-tabs>')}]);